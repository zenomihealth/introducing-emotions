"use strict";(self.webpackChunk_articulate_mondrian_bundles=self.webpackChunk_articulate_mondrian_bundles||[]).push([[294],{8761:(t,e,n)=>{n.d(e,{A:()=>l,b:()=>s});var i=n(1182),o=n.n(i),r=n(2806),a=n.n(r)()(o());a.push([t.id,".hXRin0tc .tiptap {\n  font-family: var(--mon-theme-font-body);\n  height: 100%;\n  width: 100%;\n}\n\n.hXRin0tc .tiptap :is(h1, h2, h3, h4, h5) {\n  font-family: var(--mon-theme-font-heading);\n  font-size: inherit;\n  font-weight: inherit;\n}\n\n.hXRin0tc .tiptap :is(p, h1, h2, h3, h4, h5) {\n  margin: 0;\n}\n\n.hXRin0tc .tiptap strong {\n  font-weight: bold;\n}\n\n.hXRin0tc .tiptap em {\n  font-style: italic;\n}\n\n.hXRin0tc .tiptap s {\n  text-decoration: line-through;\n}\n\n.hXRin0tc .tiptap u {\n  text-decoration: underline;\n}\n","",{version:3,sources:["webpack://./../../packages/core/src/styles/tiptap.module.css"],names:[],mappings:"AAAA;EACE,uCAAuC;EACvC,YAAY;EACZ,WAAW;AACb;;AAEA;EACE,0CAA0C;EAC1C,kBAAkB;EAClB,oBAAoB;AACtB;;AAEA;EACE,SAAS;AACX;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,6BAA6B;AAC/B;;AAEA;EACE,0BAA0B;AAC5B",sourcesContent:[".textItem :global(.tiptap) {\n  font-family: var(--mon-theme-font-body);\n  height: 100%;\n  width: 100%;\n}\n\n.textItem :global(.tiptap :is(h1, h2, h3, h4, h5)) {\n  font-family: var(--mon-theme-font-heading);\n  font-size: inherit;\n  font-weight: inherit;\n}\n\n.textItem :global(.tiptap :is(p, h1, h2, h3, h4, h5)) {\n  margin: 0;\n}\n\n.textItem :global(.tiptap strong) {\n  font-weight: bold;\n}\n\n.textItem :global(.tiptap em) {\n  font-style: italic;\n}\n\n.textItem :global(.tiptap s) {\n  text-decoration: line-through;\n}\n\n.textItem :global(.tiptap u) {\n  text-decoration: underline;\n}\n"],sourceRoot:""}]);var s="hXRin0tc";const l=a},6294:(t,e,n)=>{n.r(e),n.d(e,{default:()=>ti});var i=n(6218),o=(n(9763),n(2604)),r=n.n(o),a=n(101),s=n.n(a),l=n(5863),d=n.n(l),c=n(3124),u=n.n(c),m=n(6896),p=n.n(m),f=n(9917),g=n.n(f),h=n(8761),_={};_.styleTagTransform=g(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=s(),_.insertStyleElement=p(),r()(h.A,_),h.A&&h.A.locals&&h.A.locals;var y=n(7268);const $="isLearn",b=()=>(0,y.getContext)($)??!1;function v(t){return`assets/${t.path}`}var z=n(4868);n(9840);var w=n(4198),x=n(2559);const k=14,S=1.2,A="merriweather",C="lato",I="#000000",E={2:{fontSize:24,lineHeight:1.4,fontFamily:C},3:{fontSize:18,lineHeight:1.4,fontFamily:C},4:{fontSize:16,lineHeight:1.3,fontFamily:C},5:{fontSize:14,lineHeight:1.3,fontFamily:C}};function M({tr:t}){const{$head:e}=t.selection;return t.setSelection(new x.U3(t.doc.resolve(e.start()),t.doc.resolve(e.end()))),!0}function L(t,e,n){const i=n.getAttributes("textStyle").color,o=n.getAttributes("paragraph").textAlign||n.getAttributes("heading").textAlign||"left";if(t=t.command(M).unsetMark("textStyle").unsetMark("bold").unsetMark("italic").unsetMark("underline").unsetMark("strike").unsetMark("highlight"),"paragraph"===e)t=t.setParagraph().setTextSize(k).setLineHeight(S).setFontFamily(A);else{const n=parseInt(e.substring(1)),i=E[n];t=t.setHeading({level:n}).setTextSize(i.fontSize).setLineHeight(i.lineHeight).setFontFamily(i.fontFamily)}return(t=t.setColor(i)).setTextAlign(o)}function P(t,e){const n=t.chain(),i=t.isActive("heading"),o=i?t.getAttributes("heading").level:null,r=e.startsWith("h")?parseInt(e.substring(1)):null;if(i&&o===r)return L(n,"paragraph",t).run();const{$head:a}=t.state.selection,s=0===a.parent.content.size;let l=L(n,e,t);if(s)if("paragraph"===e)l=l.setTextSize(k).setFontFamily(A).setColor(I);else{const t=parseInt(e.substring(1)),n=E[t];l=l.setTextSize(n.fontSize).setFontFamily(n.fontFamily).setColor(I)}return l.run()}const j=w.YY.create({name:"headingShortcuts",addKeyboardShortcuts(){return{"Mod-Alt-2":()=>P(this.editor,"h2"),"Mod-Alt-3":()=>P(this.editor,"h3"),"Mod-Alt-4":()=>P(this.editor,"h4"),"Mod-Alt-5":()=>P(this.editor,"h5")}}});var T=n(4717),H=n(3004),R=n(4758),V=n(2359),B=n(31),F=n(2740),Y=n(5873),q=n(9395);const N=/([a-z%]+)\s*$/i,D=w.YY.create({name:"textSize",addGlobalAttributes:()=>[{types:["textStyle","highlight"],attributes:{textSize:{default:k,parseHTML(t){const e=t.style.fontSize,n=parseFloat(e);if(isNaN(n))return null;const i=N.exec(e);if(null==i)return null;switch(i[1]){case"rem":return Math.round(10*n);case"px":return Math.round(n);default:return null}},renderHTML:t=>({style:`font-size: ${t.textSize/10}rem`})}}}],addCommands:()=>({setTextSize:t=>({chain:e,editor:n})=>{const i=n.isActive("highlight"),o=e().setMark("textStyle",{textSize:t});return i&&o.setMark("highlight",{textSize:t}),o.run()}})}),W=w.YY.create({name:"lineHeight",addGlobalAttributes:()=>[{types:["paragraph","heading"],attributes:{lineHeight:{default:S,parseHTML(t){const e=t.style.lineHeight,n=parseFloat(e);return isNaN(n)?null:n},renderHTML:t=>({style:`line-height: ${t.lineHeight};`})}}}],addCommands:()=>({setLineHeight:t=>({commands:e})=>{const n=e.updateAttributes("paragraph",{lineHeight:t}),i=e.updateAttributes("heading",{lineHeight:t});return n&&i}})}),O=w.YY.create({name:"fontFamily",addGlobalAttributes:()=>[{types:["textStyle"],attributes:{fontFamily:{default:A,parseHTML:t=>t.style.fontFamily,renderHTML:t=>t.fontFamily?{style:`font-family: ${t.fontFamily}`}:{}}}}],addCommands:()=>({setFontFamily:t=>({chain:e})=>e().setMark("textStyle",{fontFamily:t}).run()})});T.A.configure({types:["textStyle"]});const X=w.YY.create({name:"init",addCommands:()=>({initFontFamily:()=>({chain:t})=>t().setFontFamily(A).run(),initLineHeight:()=>({chain:t})=>t().setLineHeight(S).run(),initTextSize:()=>({chain:t})=>t().setTextSize(k).run(),initColor:()=>({chain:t})=>t().setColor(I).run()})}),K="latestDefocusedSelectionDecoration",Q=w.YY.create({name:K,addProseMirrorPlugins:()=>[new x.k_({key:new x.hs(K),state:{init:t=>Y.zF.empty,apply(t,e){const{doc:n,selection:i}=t,o=t.getMeta(K),r=i&&i.from!==i.to;if(!r||"focus"===o?.action)return Y.zF.empty;if(r&&"blur"===o?.action){const t=Y.NZ.inline(i.from,i.to,{class:"latest-defocused-selection",nodeName:"mark"});return Y.zF.create(n,[t])}return e}},props:{decorations(t){return this.getState(t)},handleDOMEvents:{blur(t){const{tr:e}=t.state,n=e.setMeta(K,{from:e.selection.from,to:e.selection.to,action:"blur"});t.dispatch(n)},focus(t){const{tr:e}=t.state,n=e.setMeta(K,{from:e.selection.from,to:e.selection.to,action:"focus"});t.dispatch(n)}}}})]}),U=w.YY.create({name:"clearMarksOnEnter",addKeyboardShortcuts(){return{Enter:()=>{const{state:t}=this.editor,{selection:e}=t,{$from:n,empty:i}=e;if(!i)return!1;const o=n.parent;if("heading"!==o.type.name)return!1;const r=n.marks().filter((t=>"textStyle"===t.type.name));let a=null;r.length>0&&(a=r[0].attrs.color||null);const s=o.attrs.textAlign||"left";let l=this.editor.chain().splitBlock().setParagraph().setTextAlign(s);return l=l.unsetMark("bold").unsetMark("italic").unsetMark("underline").unsetMark("strike").unsetMark("highlight"),l=a?l.setMark("textStyle",{color:a}):l.unsetMark("textStyle"),l.run()}}}}),Z=[q.A.configure({history:!1,heading:{levels:[2,3,4,5]}}),V.A.configure({types:["heading","paragraph"]}),H.Ay.configure({multicolor:!0}),j,U,B.A,T.A,D,W,F.A,R.A,O,X,Q];(0,w._w)(Z);var G=n(6195);class J extends G.z.ZodType{constructor(t){super({}),this._object=t}_parse(t){const e={},{data:n}=t;if(n&&"object"==typeof n&&!Array.isArray(n))for(const[t,i]of Object.entries(this._object.shape))if(Object.hasOwn(n,t)){const o=n[t],r=i.safeParse(o);r.success&&(e[t]=r.data)}return{status:"valid",value:e}}}function tt(t){return new J(t)}const et=G.z.object({accentContrast:G.z.string(),allowSearch:G.z.boolean(),animateBlockEntrance:G.z.boolean(),blockPaddingBottom:G.z.number(),blockPaddingTop:G.z.number(),bodyTypefaceId:G.z.string(),buttonInlineStyle:G.z.string(),buttonNavigationStyle:G.z.string(),buttonScheme:G.z.string(),colorAccent:G.z.string(),compactShowLessonCount:G.z.boolean(),coverImage:G.z.string(),coverImageAlpha:G.z.number(),coverImageDefault:G.z.string(),coverPageType:G.z.string(),customColorLessonHeaderContrast:G.z.string(),enableVideoPlaybackSpeed:G.z.boolean(),headingTypefaceId:G.z.string(),hideLessonHeaders:G.z.boolean(),lessonHeaderColor:G.z.string().nullable(),lessonHeaderImage:G.z.string(),lessonHeaderImageAlpha:G.z.number(),lessonHeaderImageColor:G.z.string(),lessonHeaderSize:G.z.string(),lessonHeaderStyle:G.z.string(),markLessonsComplete:G.z.boolean(),navigation:G.z.boolean(),navigationRestricted:G.z.boolean(),navigationStyle:G.z.string(),showAuthor:G.z.boolean(),showLessonCount:G.z.boolean(),showNavigationButtons:G.z.boolean(),sidebarStartsOpen:G.z.boolean(),themeId:G.z.string(),uiTypefaceId:G.z.string()}),nt=G.z.enum(["bold","regular","light","italic","black","semibold","semibolditalic","bolditalic","medium"]),it=G.z.object({id:G.z.string(),key:G.z.string(),original:G.z.string().nullable(),style:nt}),ot=G.z.object({id:G.z.string(),name:G.z.string(),author:G.z.string().nullable(),createdAt:G.z.string(),default:G.z.boolean(),fonts:G.z.record(it)}),rt=G.z.record(ot),at=G.z.union([G.z.boolean(),G.z.number(),G.z.string()]),st=G.z.record(at),lt=G.z.object({backgroundColor:G.z.string().optional()});tt(G.z.object({theme:tt(et),typefaces:rt,featureFlags:st,block:lt}));var dt=n(1120);function ct(t,e,n,i){return e.addEventListener(t,n,i),()=>{e.removeEventListener(t,n,i)}}const ut=new Map,mt=new Map,pt="ItemRenderingContext";function ft(t,e){ut.set(t.id,e)}function gt(t){return ut.get(t.id)}function ht(t){ut.delete(t.id)}function _t(t,e){mt.set(t.id,e)}function yt(t){return mt.get(t.id)}function $t(t){mt.delete(t.id)}const bt={left:(1-Math.SQRT1_2)/2,top:(1-Math.SQRT1_2)/2,width:Math.SQRT1_2,height:Math.SQRT1_2},vt={discriminator:"ellipse",clipPath(t,{width:e,height:n}){let i="m 0 0";return i+=` m ${e} ${n/2}`,i+=` a ${e/2} ${n/2} 0 0 1 ${-e},0`,i+=` a ${e/2} ${n/2} 0 0 1 ${e},0`,i+=" z",i},textExtents:t=>bt};function zt(t,e,n){return e<t?t:e>n?n:e}function wt({fromPoint:t,fromValue:e,toPoint:n,toValue:i},o){const r=(o-e)/(i-e),a=1-r;return{x:t.x*a+n.x*r,y:t.y*a+n.y*r}}const{min:xt,max:kt}=Math,St={left:0,top:0,width:1,height:1},At={topLeft:0,topRight:0,bottomRight:0,bottomLeft:0};function Ct(t,e,n){return t+n<=e?t:t*e/(t+n)}function It(t,e,n,i,o){return xt(Ct(n,e,t),Ct(n,i,o))}function Et({topLeft:t,topRight:e,bottomRight:n,bottomLeft:i},{width:o,height:r}){return{topLeft:It(i,r,t,o,e),topRight:It(t,o,e,r,n),bottomRight:It(e,r,n,o,i),bottomLeft:It(n,o,i,r,t)}}function Mt(t){if(!t)return!0;const{topLeft:e,topRight:n,bottomRight:i,bottomLeft:o}=t;return e===n&&e===i&&e===o}function Lt({width:t,height:e}){return[{fromPoint:{x:0,y:0},fromValue:0,toPoint:{x:10,y:10},toValue:10},{fromPoint:{x:t,y:0},fromValue:0,toPoint:{x:t-10,y:10},toValue:10},{fromPoint:{x:t,y:e},fromValue:0,toPoint:{x:t-10,y:e-10},toValue:10},{fromPoint:{x:0,y:e},fromValue:0,toPoint:{x:10,y:e-10},toValue:10}]}const Pt={discriminator:"rectangle",clipPath({borderRadius:t},e){const{width:n,height:i}=e;let o="m 0 0";if(t){const{topLeft:r,topRight:a,bottomRight:s,bottomLeft:l}=Et(t,e);o+=` m ${r} 0`,o+=` l ${n-r-a} 0 a ${a} ${a} 0 0 1 ${a},${a}`,o+=` l 0 ${i-a-s} a ${s} ${s} 0 0 1 ${-s},${s}`,o+=` l ${s+l-n} 0 a ${l} ${l} 0 0 1 ${-l},${-l}`,o+=` l 0 ${l+r-i} a ${r} ${r} 0 0 1 ${r},${-r}`}else o+=` l ${n} 0`,o+=` l 0 ${i}`,o+=` l ${-n} 0`,o+=" l 0 "+-i;return o+=" z",o},textExtents:t=>St,getControlPoints({borderRadius:t},e){const{topLeft:n,topRight:i,bottomRight:o,bottomLeft:r}=Et(t??At,e),a=Lt(e),s=Mt(t)?"normal":"alternate",l=xt(10,e.width/4,e.height/4);return[n,i,o,r].map(((t,e)=>({position:wt(a[e],kt(t,l)),style:s})))},dragControlPoint({borderRadius:t},e,n,i){const o=Lt(e)[n],{width:r,height:a}=e,s=function({fromPoint:t,fromValue:e,toPoint:n,toValue:i},o){const r=o.x-t.x,a=o.y-t.y,s=n.x-t.x,l=n.y-t.y,d=(r*s+a*l)/(s*s+l*l);return(1-d)*e+d*i}(o,i);let l;if(Mt(t)){const t=zt(0,s,xt(a/2,r/2));l={topLeft:t,topRight:t,bottomRight:t,bottomLeft:t}}else switch(l={...t??At},n){case 0:l.topLeft=zt(0,s,xt(a-l.bottomLeft,r-l.topRight));break;case 1:l.topRight=zt(0,s,xt(r-l.topLeft,a-l.bottomRight));break;case 2:l.bottomRight=zt(0,s,xt(a-l.topRight,r-l.bottomLeft));break;case 3:l.bottomLeft=zt(0,s,xt(r-l.bottomRight,a-l.topLeft))}return{type:"rectangle",borderRadius:l}}},jt=new Map;function Tt(t){jt.set(t.discriminator,t)}function Ht(t,e){return jt.get(t.type).clipPath(t,e)}Tt(Pt),Tt(vt);var Rt=n(4015),Vt=n.n(Rt);function Bt(t,e,n=Object.keys(t.states.default)){const i=t.states.default,o=structuredClone(t.states[e]);return n.reduce(((t,e)=>(Vt()(t[e])&&(t[e]=structuredClone(i[e])),t)),o)}var Ft=n(3134),Yt=n.n(Ft);const{Map:qt}=i.globals;function Nt(t,e,n){const i=t.slice();return i[2]=e[n],i}function Dt(t,e){let n,o;return{key:t,first:null,c(){n=(0,i.element)("link"),(0,i.attr)(n,"rel","prefetch"),(0,i.attr)(n,"href",o=v(e[2])),(0,i.attr)(n,"as","image"),this.first=n},m(t,e){(0,i.insert)(t,n,e)},p(t,r){e=t,1&r&&o!==(o=v(e[2]))&&(0,i.attr)(n,"href",o)},d(t){t&&(0,i.detach)(n)}}}function Wt(t){let e,n=[],o=new qt,r=(0,i.ensure_array_like)(t[0].values());const a=t=>t[2].id;for(let e=0;e<r.length;e+=1){let i=Nt(t,r,e),s=a(i);o.set(s,n[e]=Dt(s,i))}return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=(0,i.empty)()},m(t,o){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(document.head,null);(0,i.append)(document.head,e)},p(t,[s]){1&s&&(r=(0,i.ensure_array_like)(t[0].values()),n=(0,i.update_keyed_each)(n,s,a,1,t,r,o,e.parentNode,i.destroy_block,Dt,e,Nt))},i:i.noop,o:i.noop,d(t){for(let t=0;t<n.length;t+=1)n[t].d();(0,i.detach)(e)}}}function Ot(t,e,n){let i,{items:o}=e;return t.$$set=t=>{"items"in t&&n(1,o=t.items)},t.$$.update=()=>{2&t.$$.dirty&&n(0,i=new Map(o.flatMap((t=>Object.values(t.assets??{}))).map((t=>[t.id,t]))))},[i,o]}class Xt extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,Ot,Wt,i.safe_not_equal,{items:1})}}const Kt=Xt;function Qt(t){(0,i.append_styles)(t,"svelte-1h2ri7t","svg.mondrian__border-2E5H6C{position:absolute;pointer-events:none}svg.mondrian__border-2E5H6C path{fill:none;stroke-linecap:round}")}function Ut(t){let e,n,o,r,a;return{c(){e=(0,i.svg_element)("svg"),n=(0,i.svg_element)("path"),(0,i.attr)(n,"stroke-width",t[3]),(0,i.attr)(n,"stroke",o=t[2].color),(0,i.attr)(n,"stroke-dasharray",t[4]),(0,i.attr)(n,"d",t[5]),(0,i.attr)(e,"class","mondrian__border-2E5H6C"),(0,i.attr)(e,"viewBox",t[7]),(0,i.attr)(e,"width",r=t[0].value+t[3]),(0,i.attr)(e,"height",a=t[1].value+t[3]),(0,i.set_style)(e,"inset",t[6]),(0,i.set_style)(e,"opacity",t[2].opacity)},m(t,o){(0,i.insert)(t,e,o),(0,i.append)(e,n)},p(t,s){8&s&&(0,i.attr)(n,"stroke-width",t[3]),4&s&&o!==(o=t[2].color)&&(0,i.attr)(n,"stroke",o),16&s&&(0,i.attr)(n,"stroke-dasharray",t[4]),32&s&&(0,i.attr)(n,"d",t[5]),128&s&&(0,i.attr)(e,"viewBox",t[7]),9&s&&r!==(r=t[0].value+t[3])&&(0,i.attr)(e,"width",r),10&s&&a!==(a=t[1].value+t[3])&&(0,i.attr)(e,"height",a),64&s&&(0,i.set_style)(e,"inset",t[6]),4&s&&(0,i.set_style)(e,"opacity",t[2].opacity)},d(t){t&&(0,i.detach)(e)}}}function Zt(t){let e,n=t[2].applied&&Ut(t);return{c(){n&&n.c(),e=(0,i.empty)()},m(t,o){n&&n.m(t,o),(0,i.insert)(t,e,o)},p(t,[i]){t[2].applied?n?n.p(t,i):(n=Ut(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:i.noop,o:i.noop,d(t){t&&(0,i.detach)(e),n&&n.d(t)}}}function Gt(t,e,n){let i,o,r,a,s,l,d,c,{width:u}=e,{height:m}=e,{border:p}=e,{clipDef:f}=e;return t.$$set=t=>{"width"in t&&n(0,u=t.width),"height"in t&&n(1,m=t.height),"border"in t&&n(2,p=t.border),"clipDef"in t&&n(8,f=t.clipDef)},t.$$.update=()=>{1&t.$$.dirty&&n(10,i=u.value),2&t.$$.dirty&&n(9,o=m.value),4&t.$$.dirty&&n(3,r=p.width.value),8&t.$$.dirty&&n(11,a=r/2),1544&t.$$.dirty&&n(7,s=`0 0 ${i+r} ${o+r}`),2048&t.$$.dirty&&n(6,l=`${-a}px auto auto ${-a}px`),3840&t.$$.dirty&&n(5,d=`M ${a} ${a} `+Ht(f,{width:i,height:o})),12&t.$$.dirty&&n(4,c="dashed"===p.style?`${2*r} ${2*r}`:"dotted"===p.style?"0 "+2*r:void 0)},[u,m,p,r,c,d,l,s,f,o,i,a]}class Jt extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,Gt,Zt,i.safe_not_equal,{width:0,height:1,border:2,clipDef:8},Qt)}}const te=Jt;function ee(t){(0,i.append_styles)(t,"svelte-1i62r4",".mondrian__mon-clip-path-3q3EXx{position:absolute;inset:0}")}function ne(t){let e,n;const o=t[5].default,r=(0,i.create_slot)(o,t,t[4],null);return{c(){e=(0,i.element)("div"),r&&r.c(),(0,i.attr)(e,"class","mondrian__mon-clip-path-3q3EXx"),(0,i.toggle_class)(e,"--ellipse","ellipse"===t[0].type),(0,i.set_style)(e,"clip-path",t[1])},m(t,o){(0,i.insert)(t,e,o),r&&r.m(e,null),n=!0},p(t,[a]){r&&r.p&&(!n||16&a)&&(0,i.update_slot_base)(r,o,t,t[4],n?(0,i.get_slot_changes)(o,t[4],a,null):(0,i.get_all_dirty_from_scope)(t[4]),null),(!n||1&a)&&(0,i.toggle_class)(e,"--ellipse","ellipse"===t[0].type),2&a&&(0,i.set_style)(e,"clip-path",t[1])},i(t){n||((0,i.transition_in)(r,t),n=!0)},o(t){(0,i.transition_out)(r,t),n=!1},d(t){t&&(0,i.detach)(e),r&&r.d(t)}}}function ie(t,e,n){let i,{$$slots:o={},$$scope:r}=e,{clipDef:a}=e,{width:s}=e,{height:l}=e;return t.$$set=t=>{"clipDef"in t&&n(0,a=t.clipDef),"width"in t&&n(2,s=t.width),"height"in t&&n(3,l=t.height),"$$scope"in t&&n(4,r=t.$$scope)},t.$$.update=()=>{13&t.$$.dirty&&n(1,i=`path("${Ht(a,{width:s,height:l})}")`)},[a,i,s,l,r,o]}class oe extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,ie,ne,i.safe_not_equal,{clipDef:0,width:2,height:3},ee)}}const re=oe;function ae(t){(0,i.append_styles)(t,"svelte-ph7izn",".mondrian__fill-3YgXmV{position:absolute;inset:0;transition:inherit;border-radius:inherit}.mondrian__fill-image-3rWCtq{overflow:hidden}.mondrian__fill-image-3rWCtq .mondrian__image-10_BMd{background-size:100% 100%}")}function se(t){let e,n,o,r=100*t[1].crop.width+"%",a=100*t[1].crop.height+"%",s=`translate(${(50*(1-t[1].crop.width)+100*t[1].crop.left)/t[1].crop.width}%, ${(50*(1-t[1].crop.height)+100*t[1].crop.top)/t[1].crop.height}%`;return{c(){e=(0,i.element)("div"),n=(0,i.element)("div"),(0,i.attr)(n,"class","mondrian__image-10_BMd"),(0,i.attr)(n,"role",o=t[0]&&"img"),(0,i.attr)(n,"aria-label",t[0]),(0,i.set_style)(n,"background-image",t[2]),(0,i.set_style)(n,"opacity",t[1].opacity),(0,i.set_style)(n,"width",r),(0,i.set_style)(n,"height",a),(0,i.set_style)(n,"transform",s),(0,i.attr)(e,"class","mondrian__fill-3YgXmV mondrian__fill-image-3rWCtq")},m(t,o){(0,i.insert)(t,e,o),(0,i.append)(e,n)},p(t,e){1&e&&o!==(o=t[0]&&"img")&&(0,i.attr)(n,"role",o),1&e&&(0,i.attr)(n,"aria-label",t[0]),4&e&&(0,i.set_style)(n,"background-image",t[2]),2&e&&(0,i.set_style)(n,"opacity",t[1].opacity),2&e&&r!==(r=100*t[1].crop.width+"%")&&(0,i.set_style)(n,"width",r),2&e&&a!==(a=100*t[1].crop.height+"%")&&(0,i.set_style)(n,"height",a),2&e&&s!==(s=`translate(${(50*(1-t[1].crop.width)+100*t[1].crop.left)/t[1].crop.width}%, ${(50*(1-t[1].crop.height)+100*t[1].crop.top)/t[1].crop.height}%`)&&(0,i.set_style)(n,"transform",s)},d(t){t&&(0,i.detach)(e)}}}function le(t){let e;return{c(){e=(0,i.element)("div"),(0,i.attr)(e,"class","mondrian__fill-3YgXmV fill-color"),(0,i.set_style)(e,"background-color",t[1].color),(0,i.set_style)(e,"opacity",t[1].opacity)},m(t,n){(0,i.insert)(t,e,n)},p(t,n){2&n&&(0,i.set_style)(e,"background-color",t[1].color),2&n&&(0,i.set_style)(e,"opacity",t[1].opacity)},d(t){t&&(0,i.detach)(e)}}}function de(t){let e;function n(t,e){return"color"===t[1].type?le:"image"===t[1].type?se:void 0}let o=n(t),r=o&&o(t);return{c(){r&&r.c(),e=(0,i.empty)()},m(t,n){r&&r.m(t,n),(0,i.insert)(t,e,n)},p(t,[i]){o===(o=n(t))&&r?r.p(t,i):(r&&r.d(1),r=o&&o(t),r&&(r.c(),r.m(e.parentNode,e)))},i:i.noop,o:i.noop,d(t){t&&(0,i.detach)(e),r&&r.d(t)}}}function ce(t,e,n){let i,{altText:o}=e,{assets:r}=e,{fill:a}=e;return t.$$set=t=>{"altText"in t&&n(0,o=t.altText),"assets"in t&&n(3,r=t.assets),"fill"in t&&n(1,a=t.fill)},t.$$.update=()=>{10&t.$$.dirty&&n(2,i="image"===a.type&&r?.[a.assetId]?`url("${v(r?.[a.assetId])}")`:null)},[o,a,i,r]}class ue extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,ce,de,i.safe_not_equal,{altText:0,assets:3,fill:1},ae)}}const me=ue;function pe(t){(0,i.append_styles)(t,"svelte-uspc47",".mondrian__mon-audio-wrapper-1N0BNV{position:absolute;inset:0}audio.mondrian__mon-item-audio-19T-ps{pointer-events:initial;object-fit:cover;width:100%;height:100%}")}function fe(t){let e,n,o,r;return{c(){e=(0,i.element)("audio"),(0,i.attr)(e,"class","mondrian__mon-item-audio-19T-ps"),(0,i.src_url_equal)(e.src,n=t[3])||(0,i.attr)(e,"src",n),e.controls=!0},m(n,a){(0,i.insert)(n,e,a),t[7](e),o||(r=[(0,i.listen)(e,"play",t[4]),(0,i.listen)(e,"pause",t[5]),(0,i.listen)(e,"ended",t[6])],o=!0)},p(t,o){8&o&&!(0,i.src_url_equal)(e.src,n=t[3])&&(0,i.attr)(e,"src",n)},d(n){n&&(0,i.detach)(e),t[7](null),o=!1,(0,i.run_all)(r)}}}function ge(t){let e,n,o=t[1],r=fe(t);return{c(){e=(0,i.element)("div"),r.c(),(0,i.attr)(e,"class","mondrian__mon-audio-wrapper-1N0BNV"),(0,i.attr)(e,"data-item-id",n=t[0].id)},m(t,n){(0,i.insert)(t,e,n),r.m(e,null)},p(t,[a]){2&a&&(0,i.safe_not_equal)(o,o=t[1])?(r.d(1),r=fe(t),r.c(),r.m(e,null)):r.p(t,a),1&a&&n!==(n=t[0].id)&&(0,i.attr)(e,"data-item-id",n)},i:i.noop,o:i.noop,d(t){t&&(0,i.detach)(e),r.d(t)}}}function he(t,e,n){let o,r,{item:a}=e,{stateId:s}=e;function l(t){r.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:{itemId:a.id}}))}return(0,y.onDestroy)((()=>{r&&$t(a)})),t.$$set=t=>{"item"in t&&n(0,a=t.item),"stateId"in t&&n(1,s=t.stateId)},t.$$.update=()=>{if(3&t.$$.dirty){const t=(a.states[s].audioSources??a.states.default.audioSources).default,e=t&&a.assets?.[t];n(3,o=e?v(e):void 0)}5&t.$$.dirty&&r&&_t(a,r)},[a,s,r,o,function(){l(z.H5.mediaPlay)},function(){l(z.H5.mediaPause)},function(){l(z.H5.mediaEnd)},function(t){i.binding_callbacks[t?"unshift":"push"]((()=>{r=t,n(2,r)}))}]}class _e extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,he,ge,i.safe_not_equal,{item:0,stateId:1},pe)}}const ye=_e;function $e(t){(0,i.append_styles)(t,"svelte-1nhg2c9",".mondrian__mon-item-mouse-trigger-2f2dTf{position:absolute;inset:0}.mondrian__mon-item-mouse-trigger-2f2dTf.mondrian__--visible-3hMjQT{pointer-events:initial}.mondrian__mon-item-mouse-trigger-2f2dTf.mondrian__--clickable-2-WSjW{cursor:pointer}")}function be(t){let e,n;return e=new me({props:{altText:t[3],assets:t[0].assets,fill:t[5]}}),{c(){(0,i.create_component)(e.$$.fragment)},m(t,o){(0,i.mount_component)(e,t,o),n=!0},p(t,n){const i={};8&n&&(i.altText=t[3]),1&n&&(i.assets=t[0].assets),32&n&&(i.fill=t[5]),e.$set(i)},i(t){n||((0,i.transition_in)(e.$$.fragment,t),n=!0)},o(t){(0,i.transition_out)(e.$$.fragment,t),n=!1},d(t){(0,i.destroy_component)(e,t)}}}function ve(t){let e,n;return e=new me({props:{assets:t[0].assets,fill:t[4]}}),{c(){(0,i.create_component)(e.$$.fragment)},m(t,o){(0,i.mount_component)(e,t,o),n=!0},p(t,n){const i={};1&n&&(i.assets=t[0].assets),16&n&&(i.fill=t[4]),e.$set(i)},i(t){n||((0,i.transition_in)(e.$$.fragment,t),n=!0)},o(t){(0,i.transition_out)(e.$$.fragment,t),n=!1},d(t){(0,i.destroy_component)(e,t)}}}function ze(t){let e,n,o,r,a,s,l=null!=t[5]&&be(t),d=null!=t[4]&&ve(t);return{c(){l&&l.c(),e=(0,i.space)(),d&&d.c(),n=(0,i.space)(),o=(0,i.element)("div"),(0,i.attr)(o,"class","mondrian__mon-item-mouse-trigger-2f2dTf"),(0,i.attr)(o,"role",r=t[2]?"button":void 0),(0,i.attr)(o,"tabindex",a=t[2]?0:void 0),(0,i.toggle_class)(o,"mondrian__--visible-3hMjQT",t[1]),(0,i.toggle_class)(o,"mondrian__--clickable-2-WSjW",t[2])},m(t,r){l&&l.m(t,r),(0,i.insert)(t,e,r),d&&d.m(t,r),(0,i.insert)(t,n,r),(0,i.insert)(t,o,r),s=!0},p(t,c){null!=t[5]?l?(l.p(t,c),32&c&&(0,i.transition_in)(l,1)):(l=be(t),l.c(),(0,i.transition_in)(l,1),l.m(e.parentNode,e)):l&&((0,i.group_outros)(),(0,i.transition_out)(l,1,1,(()=>{l=null})),(0,i.check_outros)()),null!=t[4]?d?(d.p(t,c),16&c&&(0,i.transition_in)(d,1)):(d=ve(t),d.c(),(0,i.transition_in)(d,1),d.m(n.parentNode,n)):d&&((0,i.group_outros)(),(0,i.transition_out)(d,1,1,(()=>{d=null})),(0,i.check_outros)()),(!s||4&c&&r!==(r=t[2]?"button":void 0))&&(0,i.attr)(o,"role",r),(!s||4&c&&a!==(a=t[2]?0:void 0))&&(0,i.attr)(o,"tabindex",a),(!s||2&c)&&(0,i.toggle_class)(o,"mondrian__--visible-3hMjQT",t[1]),(!s||4&c)&&(0,i.toggle_class)(o,"mondrian__--clickable-2-WSjW",t[2])},i(t){s||((0,i.transition_in)(l),(0,i.transition_in)(d),s=!0)},o(t){(0,i.transition_out)(l),(0,i.transition_out)(d),s=!1},d(t){t&&((0,i.detach)(e),(0,i.detach)(n),(0,i.detach)(o)),l&&l.d(t),d&&d.d(t)}}}function we(t){let e,n;return e=new re({props:{clipDef:t[8],width:t[7],height:t[6],$$slots:{default:[ze]},$$scope:{ctx:t}}}),{c(){(0,i.create_component)(e.$$.fragment)},m(t,o){(0,i.mount_component)(e,t,o),n=!0},p(t,[n]){const i={};256&n&&(i.clipDef=t[8]),128&n&&(i.width=t[7]),64&n&&(i.height=t[6]),4159&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){n||((0,i.transition_in)(e.$$.fragment,t),n=!0)},o(t){(0,i.transition_out)(e.$$.fragment,t),n=!1},d(t){(0,i.destroy_component)(e,t)}}}function xe(t,e,n){let i,o,r,a,s,l,d,c,{item:u}=e,{stateId:m}=e,{visible:p}=e,{clickable:f=!1}=e;return t.$$set=t=>{"item"in t&&n(0,u=t.item),"stateId"in t&&n(9,m=t.stateId),"visible"in t&&n(1,p=t.visible),"clickable"in t&&n(2,f=t.clickable)},t.$$.update=()=>{1&t.$$.dirty&&n(11,i=u.states.default),513&t.$$.dirty&&n(10,o=u.states[m]),3072&t.$$.dirty&&n(8,r=o.clipDef??i.clipDef),3072&t.$$.dirty&&n(7,a=o.width?.value??i.width.value),3072&t.$$.dirty&&n(6,s=o.height?.value??i.height.value),3072&t.$$.dirty&&n(5,l=o.fill??i.fill),3072&t.$$.dirty&&n(4,d=o.overlay??i.overlay),1024&t.$$.dirty&&n(3,c="altText"in o?o.altText??void 0:void 0)},[u,p,f,c,d,l,s,a,r,m,o,i]}class ke extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,xe,we,i.safe_not_equal,{item:0,stateId:9,visible:1,clickable:2},$e)}}const Se=ke;function Ae(t){(0,i.append_styles)(t,"svelte-11xtlh8",".mondrian__mon-item-transform-35_L4P{position:absolute;pointer-events:none}.mondrian__mon-item-transform-35_L4P.mondrian__--smooth-transitions-1R_oNu{transition:all 100ms ease}")}function Ce(t){let e,n,o,r=`${t[8]}px`,a=`${t[7]}px`,s=`translate(${t[6]}px, ${t[5]}px) rotate(${t[2]}deg) scale(${t[4]?-1:1}, ${t[3]?-1:1})`;const l=t[15].default,d=(0,i.create_slot)(l,t,t[14],null);return{c(){e=(0,i.element)("div"),d&&d.c(),(0,i.attr)(e,"class","mondrian__mon-item-transform-35_L4P"),(0,i.attr)(e,"data-item-id",n=t[0].id.slice(0,5)),(0,i.toggle_class)(e,"mondrian__--smooth-transitions-1R_oNu",t[9]),(0,i.set_style)(e,"width",r),(0,i.set_style)(e,"height",a),(0,i.set_style)(e,"transform",s),(0,i.set_style)(e,"z-index",t[1])},m(t,n){(0,i.insert)(t,e,n),d&&d.m(e,null),o=!0},p(t,[c]){d&&d.p&&(!o||16384&c)&&(0,i.update_slot_base)(d,l,t,t[14],o?(0,i.get_slot_changes)(l,t[14],c,null):(0,i.get_all_dirty_from_scope)(t[14]),null),(!o||1&c&&n!==(n=t[0].id.slice(0,5)))&&(0,i.attr)(e,"data-item-id",n),256&c&&r!==(r=`${t[8]}px`)&&(0,i.set_style)(e,"width",r),128&c&&a!==(a=`${t[7]}px`)&&(0,i.set_style)(e,"height",a),124&c&&s!==(s=`translate(${t[6]}px, ${t[5]}px) rotate(${t[2]}deg) scale(${t[4]?-1:1}, ${t[3]?-1:1})`)&&(0,i.set_style)(e,"transform",s),2&c&&(0,i.set_style)(e,"z-index",t[1])},i(t){o||((0,i.transition_in)(d,t),o=!0)},o(t){(0,i.transition_out)(d,t),o=!1},d(t){t&&(0,i.detach)(e),d&&d.d(t)}}}function Ie(t,e,n){let i,o,r,a,s,l,d,c,{$$slots:u={},$$scope:m}=e,{item:p}=e,{stateId:f}=e,{zIndex:g}=e;const h=!(p.parentId===p.blockumentId)&&b();let _,y;return t.$$set=t=>{"item"in t&&n(0,p=t.item),"stateId"in t&&n(10,f=t.stateId),"zIndex"in t&&n(1,g=t.zIndex),"$$scope"in t&&n(14,m=t.$$scope)},t.$$.update=()=>{if(1&t.$$.dirty&&n(12,i=p.states.default),1025&t.$$.dirty&&n(13,o=p.states[f]),12288&t.$$.dirty&&n(8,r=(o.width??i.width).value),12288&t.$$.dirty&&n(7,a=(o.height??i.height).value),12288&t.$$.dirty&&n(6,s=i.x.value+(o.xOffset??0)),12288&t.$$.dirty&&n(5,l=i.y.value+(o.yOffset??0)),14340&t.$$.dirty){const t=o.rotation??i.rotation;if(null==_)n(2,y=t);else if(t!==_){let e=t-_;e>180?e-=360:e<=-180&&(e+=360),n(2,y+=e)}n(11,_=t)}12288&t.$$.dirty&&n(4,d=o.flipX??i.flipX),12288&t.$$.dirty&&n(3,c=o.flipY??i.flipY)},[p,g,y,c,d,l,s,a,r,h,f,_,i,o,m,u]}class Ee extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,Ie,Ce,i.safe_not_equal,{item:0,stateId:10,zIndex:1},Ae)}}const Me=Ee;var Le=n(3948);function Pe(t){(0,i.append_styles)(t,"svelte-15oexdl",".mondrian__text-item-clip-3W8l4a{position:absolute;inset:0}.mondrian__text-item-clip-boundary-1Awcel{position:absolute}.mondrian__text-item-padding-boundary-1PQhi5{position:absolute;inset:0;--runoff-area:-50px}.mondrian__--padded-2F8Hsf.mondrian__text-item-padding-boundary-1PQhi5{inset:16px}.mondrian__--padded-2F8Hsf.mondrian__text-item-padding-boundary-1PQhi5.mondrian__--small-37Hevy{left:8px;right:8px}.mondrian__--padded-2F8Hsf.mondrian__text-item-padding-boundary-1PQhi5.mondrian__--large-IGC0Ql{left:32px;right:32px}.mondrian__text-item-padding-boundary-1PQhi5[data-vertical-align='top']{bottom:var(--runoff-area);--text-item-vertical-align:start}.mondrian__text-item-padding-boundary-1PQhi5[data-vertical-align='middle']{top:var(--runoff-area);bottom:var(--runoff-area);--text-item-vertical-align:center}.mondrian__text-item-padding-boundary-1PQhi5[data-vertical-align='bottom']{top:var(--runoff-area);--text-item-vertical-align:end}.mondrian__text-item-padding-boundary-1PQhi5 .tiptap{align-content:var(--text-item-vertical-align)}")}function je(t){let e,n,o,r,a,s=`calc(${t[2].left} * 100%)`,l=`calc(${t[2].top} * 100%)`,d=`calc(${t[2].width} * 100%)`,c=`calc(${t[2].height} * 100%)`;const u=t[6].default,m=(0,i.create_slot)(u,t,t[5],null);return{c(){e=(0,i.element)("div"),n=(0,i.element)("div"),o=(0,i.element)("div"),m&&m.c(),(0,i.attr)(o,"class","mondrian__text-item-padding-boundary-1PQhi5"),(0,i.attr)(o,"data-vertical-align",r=t[1].textVerticalAlign),(0,i.toggle_class)(o,"mondrian__--small-37Hevy",t[3]<=100),(0,i.toggle_class)(o,"mondrian__--large-IGC0Ql",t[3]>300),(0,i.toggle_class)(o,"mondrian__--padded-2F8Hsf","shape"===t[0].type),(0,i.attr)(n,"class","mondrian__text-item-clip-boundary-1Awcel"),(0,i.set_style)(n,"left",s),(0,i.set_style)(n,"top",l),(0,i.set_style)(n,"width",d),(0,i.set_style)(n,"height",c),(0,i.attr)(e,"class","mondrian__text-item-clip-3W8l4a")},m(t,r){(0,i.insert)(t,e,r),(0,i.append)(e,n),(0,i.append)(n,o),m&&m.m(o,null),a=!0},p(t,[e]){m&&m.p&&(!a||32&e)&&(0,i.update_slot_base)(m,u,t,t[5],a?(0,i.get_slot_changes)(u,t[5],e,null):(0,i.get_all_dirty_from_scope)(t[5]),null),(!a||2&e&&r!==(r=t[1].textVerticalAlign))&&(0,i.attr)(o,"data-vertical-align",r),(!a||8&e)&&(0,i.toggle_class)(o,"mondrian__--small-37Hevy",t[3]<=100),(!a||8&e)&&(0,i.toggle_class)(o,"mondrian__--large-IGC0Ql",t[3]>300),(!a||1&e)&&(0,i.toggle_class)(o,"mondrian__--padded-2F8Hsf","shape"===t[0].type),4&e&&s!==(s=`calc(${t[2].left} * 100%)`)&&(0,i.set_style)(n,"left",s),4&e&&l!==(l=`calc(${t[2].top} * 100%)`)&&(0,i.set_style)(n,"top",l),4&e&&d!==(d=`calc(${t[2].width} * 100%)`)&&(0,i.set_style)(n,"width",d),4&e&&c!==(c=`calc(${t[2].height} * 100%)`)&&(0,i.set_style)(n,"height",c)},i(t){a||((0,i.transition_in)(m,t),a=!0)},o(t){(0,i.transition_out)(m,t),a=!1},d(t){t&&(0,i.detach)(e),m&&m.d(t)}}}function Te(t,e,n){let i,o,r,{$$slots:a={},$$scope:s}=e,{item:l}=e,{stateId:d}=e;return t.$$set=t=>{"item"in t&&n(0,l=t.item),"stateId"in t&&n(4,d=t.stateId),"$$scope"in t&&n(5,s=t.$$scope)},t.$$.update=()=>{var e;17&t.$$.dirty&&n(1,i=Bt(l,d)),2&t.$$.dirty&&n(3,o=i.width.value),2&t.$$.dirty&&n(2,(e=i.clipDef,r=jt.get(e.type).textExtents(e)))},[l,i,r,o,d,s,a]}class He extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,Te,je,i.safe_not_equal,{item:0,stateId:4},Pe)}}const Re=He;function Ve(t){(0,i.append_styles)(t,"svelte-16jaz98",".mondrian__content-wrapper-YDBsV{height:100%}.mondrian__content-1sMUPZ p:empty{min-height:1lh}.mondrian__content-1sMUPZ{word-wrap:break-word;white-space:pre-wrap;white-space:break-spaces;font-variant-ligatures:none;font-feature-settings:'liga' 0}")}function Be(t){let e,n,o,r=(0,Le.Z)(t[2],Z)+"";return{c(){e=(0,i.element)("div"),n=(0,i.element)("div"),(0,i.attr)(n,"class","tiptap ProseMirror mondrian__content-1sMUPZ"),(0,i.attr)(e,"class",o=cn+" mondrian__content-wrapper-YDBsV")},m(t,o){(0,i.insert)(t,e,o),(0,i.append)(e,n),n.innerHTML=r},p(t,e){4&e&&r!==(r=(0,Le.Z)(t[2],Z)+"")&&(n.innerHTML=r)},d(t){t&&(0,i.detach)(e)}}}function Fe(t){let e,n;return e=new Re({props:{item:t[0],stateId:t[1],$$slots:{default:[Be]},$$scope:{ctx:t}}}),{c(){(0,i.create_component)(e.$$.fragment)},m(t,o){(0,i.mount_component)(e,t,o),n=!0},p(t,[n]){const i={};1&n&&(i.item=t[0]),2&n&&(i.stateId=t[1]),12&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){n||((0,i.transition_in)(e.$$.fragment,t),n=!0)},o(t){(0,i.transition_out)(e.$$.fragment,t),n=!1},d(t){(0,i.destroy_component)(e,t)}}}function Ye(t,e,n){let i,{item:o}=e,{stateId:r}=e;return t.$$set=t=>{"item"in t&&n(0,o=t.item),"stateId"in t&&n(1,r=t.stateId)},t.$$.update=()=>{3&t.$$.dirty&&n(2,i=o.states[r].text?.json??o.states.default.text.json)},[o,r,i]}class qe extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,Ye,Fe,i.safe_not_equal,{item:0,stateId:1},Ve)}}const Ne=qe;function De(t){(0,i.append_styles)(t,"svelte-vg4dc1",".mondrian__mon-video-wrapper-37dPyY{position:absolute;inset:0}video.mondrian__mon-item-video-1Wv5W4{pointer-events:initial;object-fit:cover;width:100%;height:100%}")}function We(t){let e,n,o,r;return{c(){e=(0,i.element)("video"),(0,i.attr)(e,"class","mondrian__mon-item-video-1Wv5W4"),(0,i.src_url_equal)(e.src,n=t[3])||(0,i.attr)(e,"src",n),e.controls=!0},m(n,a){(0,i.insert)(n,e,a),t[7](e),o||(r=[(0,i.listen)(e,"play",t[4]),(0,i.listen)(e,"pause",t[5]),(0,i.listen)(e,"ended",t[6])],o=!0)},p(t,o){8&o&&!(0,i.src_url_equal)(e.src,n=t[3])&&(0,i.attr)(e,"src",n)},d(n){n&&(0,i.detach)(e),t[7](null),o=!1,(0,i.run_all)(r)}}}function Oe(t){let e,n,o=t[1],r=We(t);return{c(){e=(0,i.element)("div"),r.c(),(0,i.attr)(e,"class","mondrian__mon-video-wrapper-37dPyY"),(0,i.attr)(e,"data-item-id",n=t[0].id)},m(t,n){(0,i.insert)(t,e,n),r.m(e,null)},p(t,[a]){2&a&&(0,i.safe_not_equal)(o,o=t[1])?(r.d(1),r=We(t),r.c(),r.m(e,null)):r.p(t,a),1&a&&n!==(n=t[0].id)&&(0,i.attr)(e,"data-item-id",n)},i:i.noop,o:i.noop,d(t){t&&(0,i.detach)(e),r.d(t)}}}function Xe(t,e,n){let o,r,{item:a}=e,{stateId:s}=e;function l(t){r.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:{itemId:a.id}}))}return(0,y.onDestroy)((()=>{r&&ht(a)})),t.$$set=t=>{"item"in t&&n(0,a=t.item),"stateId"in t&&n(1,s=t.stateId)},t.$$.update=()=>{if(3&t.$$.dirty){const t=(a.states[s].videoSources??a.states.default.videoSources).default,e=t&&a.assets?.[t];n(3,o=e?v(e):void 0)}5&t.$$.dirty&&r&&ft(a,r)},[a,s,r,o,function(){l(z.H5.mediaPlay)},function(){l(z.H5.mediaPause)},function(){l(z.H5.mediaEnd)},function(t){i.binding_callbacks[t?"unshift":"push"]((()=>{r=t,n(2,r)}))}]}class Ke extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,Xe,Oe,i.safe_not_equal,{item:0,stateId:1},De)}}const Qe=Ke;function Ue(t){(0,i.append_styles)(t,"svelte-1xuhpbp",".mondrian__mon-item-2qYEoK{position:absolute;inset:0}.mondrian__mon-item-2qYEoK.mondrian__--smooth-transitions-fWIe80{transition:opacity 100ms ease}.mondrian__mon-item-2qYEoK.mondrian__--hidden-s36Wik{opacity:0}.mondrian__mon-item-children-3w5s3j{isolation:isolate}")}function Ze(t,e,n){const i=t.slice();return i[21]=e[n],i[0]=n,i}function Ge(t){let e,n,o=[],r=new Map,a=(0,i.ensure_array_like)(t[9]);const s=t=>t[21].id;for(let e=0;e<a.length;e+=1){let n=Ze(t,a,e),i=s(n);r.set(i,o[e]=Je(i,n))}return{c(){e=(0,i.element)("div");for(let t=0;t<o.length;t+=1)o[t].c();(0,i.attr)(e,"class","mondrian__mon-item-children-3w5s3j")},m(t,r){(0,i.insert)(t,e,r);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,null);n=!0},p(t,n){512&n&&(a=(0,i.ensure_array_like)(t[9]),(0,i.group_outros)(),o=(0,i.update_keyed_each)(o,n,s,1,t,a,r,e,i.outro_and_destroy_block,Je,null,Ze),(0,i.check_outros)())},i(t){if(!n){for(let t=0;t<a.length;t+=1)(0,i.transition_in)(o[t]);n=!0}},o(t){for(let t=0;t<o.length;t+=1)(0,i.transition_out)(o[t]);n=!1},d(t){t&&(0,i.detach)(e);for(let t=0;t<o.length;t+=1)o[t].d()}}}function Je(t,e){let n,o,r;return o=new ln({props:{itemId:e[21].id,index:e[0]}}),{key:t,first:null,c(){n=(0,i.empty)(),(0,i.create_component)(o.$$.fragment),this.first=n},m(t,e){(0,i.insert)(t,n,e),(0,i.mount_component)(o,t,e),r=!0},p(t,n){e=t;const i={};512&n&&(i.itemId=e[21].id),512&n&&(i.index=e[0]),o.$set(i)},i(t){r||((0,i.transition_in)(o.$$.fragment,t),r=!0)},o(t){(0,i.transition_out)(o.$$.fragment,t),r=!1},d(t){t&&(0,i.detach)(n),(0,i.destroy_component)(o,t)}}}function tn(t){let e,n;return e=new Ne({props:{item:t[8],stateId:t[4]}}),{c(){(0,i.create_component)(e.$$.fragment)},m(t,o){(0,i.mount_component)(e,t,o),n=!0},p(t,n){const i={};256&n&&(i.item=t[8]),16&n&&(i.stateId=t[4]),e.$set(i)},i(t){n||((0,i.transition_in)(e.$$.fragment,t),n=!0)},o(t){(0,i.transition_out)(e.$$.fragment,t),n=!1},d(t){(0,i.destroy_component)(e,t)}}}function en(t){let e,n;return e=new Qe({props:{item:t[7],stateId:t[4]}}),{c(){(0,i.create_component)(e.$$.fragment)},m(t,o){(0,i.mount_component)(e,t,o),n=!0},p(t,n){const i={};128&n&&(i.item=t[7]),16&n&&(i.stateId=t[4]),e.$set(i)},i(t){n||((0,i.transition_in)(e.$$.fragment,t),n=!0)},o(t){(0,i.transition_out)(e.$$.fragment,t),n=!1},d(t){(0,i.destroy_component)(e,t)}}}function nn(t){let e,n;return e=new ye({props:{item:t[6],stateId:t[4]}}),{c(){(0,i.create_component)(e.$$.fragment)},m(t,o){(0,i.mount_component)(e,t,o),n=!0},p(t,n){const i={};64&n&&(i.item=t[6]),16&n&&(i.stateId=t[4]),e.$set(i)},i(t){n||((0,i.transition_in)(e.$$.fragment,t),n=!0)},o(t){(0,i.transition_out)(e.$$.fragment,t),n=!1},d(t){(0,i.destroy_component)(e,t)}}}function on(t){let e,n,o,r,a,s,l,d,c,u,m,p,f,g;n=new Se({props:{item:t[3],stateId:t[4],visible:t[11],clickable:t[5]}}),r=new te({props:{width:t[2].width,height:t[2].height,border:t[2].border,clipDef:t[10]}});let h=t[9]&&Ge(t),_=t[8]&&tn(t),y=t[7]&&en(t),$=t[6]&&nn(t);return{c(){e=(0,i.element)("div"),(0,i.create_component)(n.$$.fragment),o=(0,i.space)(),(0,i.create_component)(r.$$.fragment),a=(0,i.space)(),h&&h.c(),s=(0,i.space)(),_&&_.c(),l=(0,i.space)(),y&&y.c(),d=(0,i.space)(),$&&$.c(),(0,i.attr)(e,"class","mondrian__mon-item-2qYEoK"),e.inert=c=!t[11],(0,i.attr)(e,"aria-hidden",u=!t[11]),(0,i.toggle_class)(e,"mondrian__--smooth-transitions-fWIe80",t[17]),(0,i.toggle_class)(e,"mondrian__--hidden-s36Wik",!t[11])},m(c,u){(0,i.insert)(c,e,u),(0,i.mount_component)(n,e,null),(0,i.append)(e,o),(0,i.mount_component)(r,e,null),(0,i.append)(e,a),h&&h.m(e,null),(0,i.append)(e,s),_&&_.m(e,null),(0,i.append)(e,l),y&&y.m(e,null),(0,i.append)(e,d),$&&$.m(e,null),p=!0,f||(g=(0,i.action_destroyer)(m=t[12].call(null,e,{item:t[3],triggers:t[1]})),f=!0)},p(t,o){const a={};8&o&&(a.item=t[3]),16&o&&(a.stateId=t[4]),2048&o&&(a.visible=t[11]),32&o&&(a.clickable=t[5]),n.$set(a);const f={};4&o&&(f.width=t[2].width),4&o&&(f.height=t[2].height),4&o&&(f.border=t[2].border),1024&o&&(f.clipDef=t[10]),r.$set(f),t[9]?h?(h.p(t,o),512&o&&(0,i.transition_in)(h,1)):(h=Ge(t),h.c(),(0,i.transition_in)(h,1),h.m(e,s)):h&&((0,i.group_outros)(),(0,i.transition_out)(h,1,1,(()=>{h=null})),(0,i.check_outros)()),t[8]?_?(_.p(t,o),256&o&&(0,i.transition_in)(_,1)):(_=tn(t),_.c(),(0,i.transition_in)(_,1),_.m(e,l)):_&&((0,i.group_outros)(),(0,i.transition_out)(_,1,1,(()=>{_=null})),(0,i.check_outros)()),t[7]?y?(y.p(t,o),128&o&&(0,i.transition_in)(y,1)):(y=en(t),y.c(),(0,i.transition_in)(y,1),y.m(e,d)):y&&((0,i.group_outros)(),(0,i.transition_out)(y,1,1,(()=>{y=null})),(0,i.check_outros)()),t[6]?$?($.p(t,o),64&o&&(0,i.transition_in)($,1)):($=nn(t),$.c(),(0,i.transition_in)($,1),$.m(e,null)):$&&((0,i.group_outros)(),(0,i.transition_out)($,1,1,(()=>{$=null})),(0,i.check_outros)()),(!p||2048&o&&c!==(c=!t[11]))&&(e.inert=c),(!p||2048&o&&u!==(u=!t[11]))&&(0,i.attr)(e,"aria-hidden",u),m&&(0,i.is_function)(m.update)&&10&o&&m.update.call(null,{item:t[3],triggers:t[1]}),(!p||2048&o)&&(0,i.toggle_class)(e,"mondrian__--hidden-s36Wik",!t[11])},i(t){p||((0,i.transition_in)(n.$$.fragment,t),(0,i.transition_in)(r.$$.fragment,t),(0,i.transition_in)(h),(0,i.transition_in)(_),(0,i.transition_in)(y),(0,i.transition_in)($),p=!0)},o(t){(0,i.transition_out)(n.$$.fragment,t),(0,i.transition_out)(r.$$.fragment,t),(0,i.transition_out)(h),(0,i.transition_out)(_),(0,i.transition_out)(y),(0,i.transition_out)($),p=!1},d(t){t&&(0,i.detach)(e),(0,i.destroy_component)(n),(0,i.destroy_component)(r),h&&h.d(),_&&_.d(),y&&y.d(),$&&$.d(),f=!1,g()}}}function rn(t){let e,n;return e=new Me({props:{item:t[3],stateId:t[4],zIndex:null!=t[0]?-t[0]:void 0,$$slots:{default:[on]},$$scope:{ctx:t}}}),{c(){(0,i.create_component)(e.$$.fragment)},m(t,o){(0,i.mount_component)(e,t,o),n=!0},p(t,[n]){const i={};8&n&&(i.item=t[3]),16&n&&(i.stateId=t[4]),1&n&&(i.zIndex=null!=t[0]?-t[0]:void 0),8392702&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){n||((0,i.transition_in)(e.$$.fragment,t),n=!0)},o(t){(0,i.transition_out)(e.$$.fragment,t),n=!1},d(t){(0,i.destroy_component)(e,t)}}}function an({event:t}){return"click"===t}function sn(t,e,n){let o,r,a,s,l,d,c,u,m,p,f,g,{itemId:h}=e,{index:_}=e;const $=function(){const t=(0,y.getContext)(pt);if(!t)throw new Error("This component must be provided with an ItemRenderingContext");return t}(),{bindTriggers:v}=$,z=$.getItem(h);(0,i.component_subscribe)(t,z,(t=>n(3,m=t)));const w=$.getState(h);(0,i.component_subscribe)(t,w,(t=>n(4,f=t)));const x=$.getVisible(h);(0,i.component_subscribe)(t,x,(t=>n(11,g=t)));const k=$.getTriggersBySourceId();(0,i.component_subscribe)(t,k,(t=>n(19,p=t)));const S=b();return t.$$set=t=>{"itemId"in t&&n(18,h=t.itemId),"index"in t&&n(0,_=t.index)},t.$$.update=()=>{24&t.$$.dirty&&n(2,o=Bt(m,f)),4&t.$$.dirty&&n(10,r=o.clipDef),12&t.$$.dirty&&n(9,a="group"===m.type?o.children:void 0),8&t.$$.dirty&&n(8,s="shape"===m.type||"text"===m.type?m:void 0),8&t.$$.dirty&&n(7,l="video"===m.type?m:void 0),8&t.$$.dirty&&n(6,d="audio"===m.type?m:void 0),524296&t.$$.dirty&&n(1,c=p.get(m.id)??[]),2&t.$$.dirty&&n(5,u=c.some(an))},[_,c,o,m,f,u,d,l,s,a,r,g,v,z,w,x,k,S,h,p]}class ln extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,sn,rn,i.safe_not_equal,{itemId:18,index:0},Ue)}}const dn=ln;i.SvelteComponent;const cn=h.b;(0,dt.writable)(!1);const un=['input:not([type="checkbox"], [type="radio"])',"art-asset-library","textarea","[contenteditable]"].join(", ");var mn=n(9205);const pn=n.n(mn)()("mondrian").extend("keyboard"),fn={activeModifierKeys:new Set,get alt(){return fn.activeModifierKeys.has("Alt")},get meta(){return fn.activeModifierKeys.has("Meta")||fn.activeModifierKeys.has("Control")},get shift(){return fn.activeModifierKeys.has("Shift")},key:void 0,get combo(){return[fn.meta&&"Meta",fn.alt&&"Alt",fn.shift&&"Shift",fn.key].filter(Boolean).join("+")}};function gn({metaKey:t,altKey:e,shiftKey:n,ctrlKey:i},o){let r=!1;return t!==o.has("Meta")&&(r=!0,t?o.add("Meta"):o.delete("Meta")),e!==o.has("Alt")&&(r=!0,e?o.add("Alt"):o.delete("Alt")),n!==o.has("Shift")&&(r=!0,n?o.add("Shift"):o.delete("Shift")),i!==o.has("Control")&&(r=!0,i?o.add("Control"):o.delete("Control")),r}let hn=!1;const _n={...(0,dt.readable)(fn,(t=>{function e(e){const n="keydown"===e.type;gn(e,fn.activeModifierKeys),fn.key=n?e.key:void 0,t(fn)}function n(e){gn(e,fn.activeModifierKeys)&&t(fn)}hn||(hn=!0,window.addEventListener("keydown",e),window.addEventListener("keyup",e),document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&(fn.activeModifierKeys.clear(),fn.key=void 0,t(fn))})),window.addEventListener("blur",(function(){fn.activeModifierKeys.clear(),fn.key=void 0,t(fn)})),window.addEventListener("mousedown",n,{passive:!0,capture:!0}),window.addEventListener("mousemove",n,{passive:!0,capture:!0}))})),is:t=>(fn.combo&&pn(`comparing keycombos, store: ${fn.combo}, comparison: ${t}`),fn.combo.toLowerCase()===t.toLowerCase()),on(t,e){const n=n=>{!function(){const{activeElement:t}=document;return null!=t&&!!t.matches(un)}()&&_n.is(t)&&(pn("keyCombo matched, executing handler",t),e(n))};return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}}},yn=((0,dt.derived)(_n,(t=>t.meta)),(0,dt.derived)(_n,(t=>t.alt)),(0,dt.derived)(_n,(t=>t.shift)),{down:!1,downX:-1,downY:-1,target:void 0,x:-1,y:-1}),$n=((0,dt.readable)(yn,(t=>{return window.addEventListener("mousedown",e),window.addEventListener("mousemove",i),window.addEventListener("mouseup",n),function(){window.removeEventListener("mousedown",e),window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",n)};function e(t){yn.down=!0,yn.downX=yn.x=t.clientX,yn.downY=yn.y=t.clientY,yn.target=t.target,o()}function n(){yn.down=!1,yn.downX=yn.x=yn.downY=yn.y=-1,yn.target=void 0,o()}function i(t){yn.x=t.x,yn.y=t.y,o()}function o(){t(yn)}})),"mondrian-suspense");n(2466),i.SvelteComponent,n(2732);var bn=n(5494);const vn={nw:"top-start",n:"top",ne:"top-end",sw:"bottom-start",s:"bottom",se:"bottom-end"},zn=new ResizeObserver(An);let wn,xn,kn;function Sn(t){const e=function(t){for(let e=t;e;e=e.parentElement)if(e.classList.contains("mon-tooltip-anchor"))return e}(t.target);if(e===wn)return;xn&&(xn.removeAttribute("data-active"),zn.unobserve(xn));const n=e?.querySelector("[data-mon-tooltip]");if(!n||n.getAttribute("aria-hidden"))return wn=void 0,void(xn=void 0);n.setAttribute("data-active","true"),n.showPopover(),wn=e,xn=n,kn=xn.querySelector("[data-mon-tooltip-arrow]"),An(),zn.observe(xn)}async function An(){if(wn&&xn){const{x:t,y:e,middlewareData:n}=await(0,bn.rD)(wn,xn,{middleware:[(0,bn.cY)(5),(0,bn.UU)(),(0,bn.BN)(),(0,bn.UE)({element:kn})],strategy:"fixed",placement:vn[xn.getAttribute("data-position")]});if(xn.style.transform=`translate(${t}px,${e}px)`,n.arrow){const{x:t,y:e}=n.arrow;kn.style.left=null!=t?`${t}px`:"",kn.style.top=null!=e?`${e}px`:""}}}function Cn(t){(0,i.append_styles)(t,"svelte-1ooljvd",".mondrian__suspense-3tgPBN.mondrian__--loading-3irTkJ{visibility:hidden}")}document.addEventListener("mouseover",Sn,{passive:!0}),document.documentElement.addEventListener("mouseleave",Sn,{passive:!0}),document.addEventListener("scroll",An,{passive:!0,capture:!0}),i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,n(9777),i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent;const In=t=>({isLoading:1&t}),En=t=>({isLoading:t[0]});function Mn(t){let e,n;const o=t[2].default,r=(0,i.create_slot)(o,t,t[1],En);return{c(){e=(0,i.element)("div"),r&&r.c(),(0,i.attr)(e,"class","mondrian__suspense-3tgPBN"),(0,i.toggle_class)(e,"mondrian__--loading-3irTkJ",t[0])},m(t,o){(0,i.insert)(t,e,o),r&&r.m(e,null),n=!0},p(t,[a]){r&&r.p&&(!n||3&a)&&(0,i.update_slot_base)(r,o,t,t[1],n?(0,i.get_slot_changes)(o,t[1],a,In):(0,i.get_all_dirty_from_scope)(t[1]),En),(!n||1&a)&&(0,i.toggle_class)(e,"mondrian__--loading-3irTkJ",t[0])},i(t){n||((0,i.transition_in)(r,t),n=!0)},o(t){(0,i.transition_out)(r,t),n=!1},d(t){t&&(0,i.detach)(e),r&&r.d(t)}}}function Ln(t,e,n){let{$$slots:i={},$$scope:o}=e;const r=function(){const t=new Set;return(0,y.setContext)($n,t),t}();let a=!0;return(0,y.onMount)((()=>{Promise.all(r).then((()=>{n(0,a=!1)}))})),t.$$set=t=>{"$$scope"in t&&n(1,o=t.$$scope)},[a,o,i]}class Pn extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,Ln,Mn,i.safe_not_equal,{},Cn)}}const jn=Pn;i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent;var Tn=n(4993),Hn=n.n(Tn);const Rn=(t,{item:e,triggers:n})=>{function i(i,o={}){n.filter((t=>t.event===i)).forEach((n=>{!function(t,e,n){e.dispatchEvent(new CustomEvent("trigger",{detail:n,bubbles:!0}))}(0,t,{itemId:e.id,triggerId:n.id,...o})}))}const o=[...new Set(n.map((t=>t.event)))].map((e=>{switch(e){case z.H5.hover:{let n=!1;return[ct("mouseenter",t,(t=>{n||(n=!0,i(e,{hovered:n}))})),ct("mouseleave",t,(t=>{n&&(n=!1,i(e,{hovered:n}))}))]}case z.H5.click:return[ct("click",t,(t=>{i(e)})),ct("keyup",t,(t=>{["Space","Enter"].includes(t.code)&&t.target===document.activeElement&&i(e)}))];case z.H5.mediaPlay:case z.H5.mediaPause:case z.H5.mediaEnd:return ct(e,t,(t=>{i(e)}));default:return ct(e,t,(()=>{i(e)}))}})).flat(2).filter(Boolean);return{destroy(){o.forEach((t=>{t()}))}}},Vn=(t,{items:e,currentStates:n,currentVisibles:i,triggers:o})=>{const r=Yt()(o,"sourceId"),a={[z.zw.changeState](t,i,o){const r="self"===t.targetId?o:e[t.targetId];!1===i.hovered?n.get(r.id)?.revert(t.targetState):n.get(r.id)?.set(t.targetState)},[z.zw.changeVisibility](t,n,o){const r="self"===t.targetId?o:e[t.targetId];!1===n.hovered?i.get(r.id)?.set(!t.targetVisibility):i.get(r.id)?.set(t.targetVisibility)},[z.zw.mediaPause](t,n,i){const o="self"===t.targetId?i:e[t.targetId];if("video"===o.type){const t=gt(o);if(!t)return;t.pause()}else if("audio"===o.type){const t=yt(o);if(!t)return;t.pause()}},[z.zw.mediaPlay](t,n,i){const o="self"===t.targetId?i:e[t.targetId];if("video"===o.type){const t=gt(o);if(!t)return;t.play()}else if("audio"===o.type){const t=yt(o);if(!t)return;t.play()}},[z.zw.mediaEnd](t,n,i){const o="self"===t.targetId?i:e[t.targetId];if("video"===o.type){const t=gt(o);if(!t)return;t.currentTime=t.duration,t.pause()}else if("audio"===o.type){const t=yt(o);if(!t)return;t.currentTime=t.duration,t.pause()}}},s=ct("trigger",t,(t=>{const{itemId:n,triggerId:i,...o}=t.detail,s=e[n];if(!s)throw new Error(`Could not execute trigger ${i} on item ${n} because the item could not be found.`);const l=r[s.id]?.find((t=>t.id===i));if(!l)throw new Error(`Could not execute trigger ${i} on item ${n} because the trigger could not be found.`);const d=a[l.action];if(!d)throw new Error(`Could not execute trigger ${i} on item ${n} because an appropriate handler for its '${l.action}' action could not be found.`);d(l,o,s)}));return{destroy(){s()}}},Bn=function(){const t=(0,dt.writable)({blockuments:{},items:{}}),{subscribe:e,set:n,update:i}=t,o=new Map;return{subscribe:e,set:n,update:i,addManifest:(t,e)=>{o.set(t,e),r()},removeManifest:t=>{o.delete(t),r()}};function r(){n(function(...t){const e={blockuments:{},items:{}};for(const n of t)Object.assign(e.blockuments,n.blockuments),Object.assign(e.items,n.items);return e}(...o.values()))}}();function Fn(t){(0,i.append_styles)(t,"svelte-16ijcvp",".mondrian__preview-L_XOPz{display:flex;justify-content:center;align-items:center;position:relative;width:100%}.mondrian__preview--empty-1j7eyn{background-color:var(--art-color-neutral-050)}.mondrian__item-wrapper-2afgtL{transform-origin:center;position:relative;overflow:hidden}.mondrian__width-gauge-1yjeUe{position:absolute;width:100%}")}function Yn(t){let e,n;return e=new Kt({props:{items:t[13]}}),{c(){(0,i.create_component)(e.$$.fragment)},m(t,o){(0,i.mount_component)(e,t,o),n=!0},p(t,n){const i={};8192&n[0]&&(i.items=t[13]),e.$set(i)},i(t){n||((0,i.transition_in)(e.$$.fragment,t),n=!0)},o(t){(0,i.transition_out)(e.$$.fragment,t),n=!1},d(t){(0,i.destroy_component)(e,t)}}}function qn(t){let e,n;return e=new jn({props:{$$slots:{default:[On]},$$scope:{ctx:t}}}),{c(){(0,i.create_component)(e.$$.fragment)},m(t,o){(0,i.mount_component)(e,t,o),n=!0},p(t,n){const i={};4092&n[0]|2&n[1]&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){n||((0,i.transition_in)(e.$$.fragment,t),n=!0)},o(t){(0,i.transition_out)(e.$$.fragment,t),n=!1},d(t){(0,i.destroy_component)(e,t)}}}function Nn(t){let e,n,o,r;return{c(){e=(0,i.element)("div"),n=(0,i.text)("Block "),o=(0,i.text)(t[0]),r=(0,i.text)(" could not be loaded")},m(t,a){(0,i.insert)(t,e,a),(0,i.append)(e,n),(0,i.append)(e,o),(0,i.append)(e,r)},p(t,e){1&e[0]&&(0,i.set_data)(o,t[0])},i:i.noop,o:i.noop,d(t){t&&(0,i.detach)(e)}}}function Dn(t){let e,n,o,r,a,s,l,d=`${t[6]}px`,c=`${t[5]}px`;return n=new dn({props:{itemId:t[4]}}),{c(){e=(0,i.element)("div"),(0,i.create_component)(n.$$.fragment),(0,i.attr)(e,"class","mondrian__item-wrapper-2afgtL"),(0,i.attr)(e,"role","region"),(0,i.attr)(e,"aria-label",o=t[3].title),(0,i.attr)(e,"aria-live",t[11]),(0,i.set_style)(e,"width",d),(0,i.set_style)(e,"height",c)},m(o,d){(0,i.insert)(o,e,d),(0,i.mount_component)(n,e,null),a=!0,s||(l=[(0,i.listen)(e,"focus",t[18]),(0,i.listen)(e,"blur",t[19]),(0,i.listen)(e,"focusin",t[18]),(0,i.listen)(e,"mouseover",t[18]),(0,i.listen)(e,"mouseout",t[19]),(0,i.listen)(e,"focusout",t[19]),(0,i.action_destroyer)(r=Vn.call(null,e,{items:t[7],currentStates:t[14],currentVisibles:t[15],triggers:t[3].triggers}))],s=!0)},p(t,s){const l={};16&s[0]&&(l.itemId=t[4]),n.$set(l),(!a||8&s[0]&&o!==(o=t[3].title))&&(0,i.attr)(e,"aria-label",o),(!a||2048&s[0])&&(0,i.attr)(e,"aria-live",t[11]),r&&(0,i.is_function)(r.update)&&136&s[0]&&r.update.call(null,{items:t[7],currentStates:t[14],currentVisibles:t[15],triggers:t[3].triggers}),64&s[0]&&d!==(d=`${t[6]}px`)&&(0,i.set_style)(e,"width",d),32&s[0]&&c!==(c=`${t[5]}px`)&&(0,i.set_style)(e,"height",c)},i(t){a||((0,i.transition_in)(n.$$.fragment,t),a=!0)},o(t){(0,i.transition_out)(n.$$.fragment,t),a=!1},d(t){t&&(0,i.detach)(e),(0,i.destroy_component)(n),s=!1,(0,i.run_all)(l)}}}function Wn(t){let e,n,o,r,a,s,l,d,c,u,m,p=`scale(${t[10]})`,f=`${t[6]}px`,g=`${t[5]}px`,h=(t[5]??500)*t[10]+"px";return s=new dn({props:{itemId:t[4]}}),{c(){e=(0,i.element)("div"),n=(0,i.element)("div"),o=(0,i.space)(),r=(0,i.element)("div"),a=(0,i.element)("div"),(0,i.create_component)(s.$$.fragment),(0,i.attr)(n,"class","mondrian__width-gauge-1yjeUe"),(0,i.attr)(a,"class","mondrian__item-wrapper-2afgtL"),(0,i.attr)(a,"role","region"),(0,i.attr)(a,"aria-label",l=t[3].title),(0,i.attr)(a,"aria-live",t[11]),(0,i.set_style)(a,"transform",p),(0,i.set_style)(a,"width",f),(0,i.set_style)(a,"height",g),(0,i.attr)(e,"class","mondrian__preview-L_XOPz"),(0,i.toggle_class)(e,"mondrian__preview--empty-1j7eyn",t[8]),(0,i.set_style)(e,"height",h)},m(l,p){(0,i.insert)(l,e,p),(0,i.append)(e,n),t[25](n),(0,i.append)(e,o),(0,i.append)(e,r),(0,i.append)(r,a),(0,i.mount_component)(s,a,null),c=!0,u||(m=[(0,i.listen)(a,"focus",t[18]),(0,i.listen)(a,"blur",t[19]),(0,i.listen)(a,"focusin",t[18]),(0,i.listen)(a,"mouseover",t[18]),(0,i.listen)(a,"mouseout",t[19]),(0,i.listen)(a,"focusout",t[19]),(0,i.action_destroyer)(d=Vn.call(null,a,{items:t[7],currentStates:t[14],currentVisibles:t[15],triggers:t[3].triggers}))],u=!0)},p(t,n){const o={};16&n[0]&&(o.itemId=t[4]),s.$set(o),(!c||8&n[0]&&l!==(l=t[3].title))&&(0,i.attr)(a,"aria-label",l),(!c||2048&n[0])&&(0,i.attr)(a,"aria-live",t[11]),d&&(0,i.is_function)(d.update)&&136&n[0]&&d.update.call(null,{items:t[7],currentStates:t[14],currentVisibles:t[15],triggers:t[3].triggers}),1024&n[0]&&p!==(p=`scale(${t[10]})`)&&(0,i.set_style)(a,"transform",p),64&n[0]&&f!==(f=`${t[6]}px`)&&(0,i.set_style)(a,"width",f),32&n[0]&&g!==(g=`${t[5]}px`)&&(0,i.set_style)(a,"height",g),(!c||256&n[0])&&(0,i.toggle_class)(e,"mondrian__preview--empty-1j7eyn",t[8]),1056&n[0]&&h!==(h=(t[5]??500)*t[10]+"px")&&(0,i.set_style)(e,"height",h)},i(t){c||((0,i.transition_in)(s.$$.fragment,t),c=!0)},o(t){(0,i.transition_out)(s.$$.fragment,t),c=!1},d(n){n&&(0,i.detach)(e),t[25](null),(0,i.destroy_component)(s),u=!1,(0,i.run_all)(m)}}}function On(t){let e,n,o,r;const a=[Wn,Dn],s=[];function l(t,e){return t[2]?0:1}return e=l(t),n=s[e]=a[e](t),{c(){n.c(),o=(0,i.empty)()},m(t,n){s[e].m(t,n),(0,i.insert)(t,o,n),r=!0},p(t,r){let d=e;e=l(t),e===d?s[e].p(t,r):((0,i.group_outros)(),(0,i.transition_out)(s[d],1,1,(()=>{s[d]=null})),(0,i.check_outros)(),n=s[e],n?n.p(t,r):(n=s[e]=a[e](t),n.c()),(0,i.transition_in)(n,1),n.m(o.parentNode,o))},i(t){r||((0,i.transition_in)(n),r=!0)},o(t){(0,i.transition_out)(n),r=!1},d(t){t&&(0,i.detach)(o),s[e].d(t)}}}function Xn(t){let e,n,o,r,a,s=t[1]&&Yn(t);const l=[Nn,qn],d=[];function c(t,e){return void 0===t[3]||void 0===t[4]?0:1}return n=c(t),o=d[n]=l[n](t),{c(){s&&s.c(),e=(0,i.space)(),o.c(),r=(0,i.empty)()},m(t,o){s&&s.m(t,o),(0,i.insert)(t,e,o),d[n].m(t,o),(0,i.insert)(t,r,o),a=!0},p(t,a){t[1]?s?(s.p(t,a),2&a[0]&&(0,i.transition_in)(s,1)):(s=Yn(t),s.c(),(0,i.transition_in)(s,1),s.m(e.parentNode,e)):s&&((0,i.group_outros)(),(0,i.transition_out)(s,1,1,(()=>{s=null})),(0,i.check_outros)());let u=n;n=c(t),n===u?d[n].p(t,a):((0,i.group_outros)(),(0,i.transition_out)(d[u],1,1,(()=>{d[u]=null})),(0,i.check_outros)(),o=d[n],o?o.p(t,a):(o=d[n]=l[n](t),o.c()),(0,i.transition_in)(o,1),o.m(r.parentNode,r))},i(t){a||((0,i.transition_in)(s),(0,i.transition_in)(o),a=!0)},o(t){(0,i.transition_out)(s),(0,i.transition_out)(o),a=!1},d(t){t&&((0,i.detach)(e),(0,i.detach)(r)),s&&s.d(t),d[n].d(t)}}}function Kn(t,e,n){let o,r,a,s,l,d,c,u=i.noop;t.$$.on_destroy.push((()=>u()));let{manifest:m}=e,{blockumentId:p}=e,{prefetch:f=!0}=e,{autoSize:g=!0}=e;(0,y.setContext)($,!0);const h=Symbol("LearnComponent");let _,b,v=!1;const z=function(){const t=new Map;return{...(0,dt.writable)(t),add:(e,n)=>(t.has(e)||t.set(e,function(t){let e,n,i;t.subscribe((t=>{e=t}));const o=(0,dt.writable)(e);o.subscribe((t=>{n=i??e,i=t}));const r={...o,revert(t){i===t&&r.set(n)},reset(){r.set(e)}};return r}(n)),t.get(e)),get(e){if(!t.has(e))throw new Error(`No state found for item ${e}`);return t.get(e)},resetAll(){[...t.values()].forEach((t=>{t.reset()}))}}}(),w=function(){const t=new Map;return{...(0,dt.writable)(t),upsert(e,n){if(!t.has(e)){const i=function(t){const e={...(0,dt.writable)(t),show(){e.set(!0)},hide(){e.set(!1)},reset(){e.set(t)}};return e}(n);return t.set(e,i),i}const i=t.get(e);return i.set(n),i},get(e){if(!t.has(e))throw new Error(`No visibility found for item ${e}`);return t.get(e)},resetAll(){[...t.values()].forEach((t=>{t.reset()}))}}}(),x=(0,dt.writable)(new Map),k=(0,dt.writable)({});(0,i.component_subscribe)(t,k,(t=>n(7,d=t)));const S=(0,dt.derived)(k,(t=>Object.values(t)));(0,i.component_subscribe)(t,S,(t=>n(13,c=t))),(0,dt.derived)([x,S],(([t,e])=>({triggers:t,items:e}))).subscribe((({items:t})=>{t.forEach((t=>{z.add(t.id,(0,dt.readable)(t.initialState)),w.upsert(t.id,t.initialVisible)})),w.resetAll(),z.resetAll()}));const A={getTriggersBySourceId:()=>(0,dt.readonly)(x),getItem:t=>(0,dt.derived)(k,(e=>e[t])),getState:t=>z.get(t),getVisible:t=>w.get(t),bindTriggers:Rn,registerVideoElement(t,e){ft(t,e)},getVideoElement:t=>gt(t),unregisterVideoElement(t){ht(t)},registerAudioElement(t,e){_t(t,e)},getAudioElement:t=>yt(t),unregisterAudioElement(t){$t(t)}};var C;let I;C=A,(0,y.setContext)(pt,C),(0,y.onMount)((()=>{w.resetAll();const t=new ResizeObserver((()=>{I&&P()}));return I&&t.observe(I),()=>{t.disconnect()}})),(0,y.onDestroy)((()=>{Bn.removeManifest(h)}));let E,M,L=1;function P(){if(!(b&&I&&l&&g&&a&&s))return;const t=I.offsetWidth;n(10,L=Math.min(1,t/a))}let j="off";const T=Hn()((t=>{n(11,j=t?"polite":"off")}),100,{maxWait:500,trailing:!0});return t.$$set=t=>{"manifest"in t&&n(20,m=t.manifest),"blockumentId"in t&&n(0,p=t.blockumentId),"prefetch"in t&&n(1,f=t.prefetch),"autoSize"in t&&n(2,g=t.autoSize)},t.$$.update=()=>{if(1048585&t.$$.dirty[0]){const t=function(t,e){const n=structuredClone(t.items)??{};for(const t in n)n[t].blockumentId!==e&&delete n[t];return n}(m,p);n(3,_=m.blockuments?.[p]),n(4,b=_?.children[0]?.id),n(8,v=1===Object.keys(t).length),Bn.addManifest(h,m),x.set((e=_?.triggers??[],new Map(Object.entries(Yt()(e,(t=>t.sourceId??"none")))))),k.set(t)}var e;16&t.$$.dirty[0]&&(n(12,o=b?z.get(b):void 0),u(),u=(0,i.subscribe)(o,(t=>n(24,l=t)))),16777360&t.$$.dirty[0]&&n(23,r=b&&d[b]&&l?Bt(d[b],l,["width","height"]):void 0),8388608&t.$$.dirty[0]&&n(6,a=r?.width.value),8388608&t.$$.dirty[0]&&n(5,s=r?.height.value),6291552&t.$$.dirty[0]&&(E===a&&M===s||(n(21,E=a),n(22,M=s),P()))},[p,f,g,_,b,s,a,d,v,I,L,j,o,c,z,w,k,S,function(){T(!0)},function(){T(!1)},m,E,M,r,l,function(t){i.binding_callbacks[t?"unshift":"push"]((()=>{I=t,n(9,I)}))}]}class Qn extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,Kn,Xn,i.safe_not_equal,{manifest:20,blockumentId:0,prefetch:1,autoSize:2},Fn,[-1,-1])}}const Un=Qn;var Zn=n(6170),Gn=n.n(Zn);const Jn=((t,e={width:"100%"},n="div")=>i=>{const o=(0,Zn.useRef)(null),r=(0,Zn.useRef)(null);return(0,Zn.useEffect)((()=>(r.current=new t({target:o.current,props:i}),()=>{r.current?.$destroy()})),[]),(0,Zn.useEffect)((()=>{r.current?.$set(i)}),[i]),Gn().createElement(n,{ref:o,style:e})})(Un),ti=t=>{const{manifest:e,...n}=t,i=(0,Zn.useMemo)((()=>{const t=z.S0.safeParse(e);if(t.success)return t.data}),[e]);return i?Gn().createElement(Jn,{manifest:i,...n}):null}},4868:(t,e,n)=>{n.d(e,{pL:()=>O,S0:()=>X,zw:()=>U,H5:()=>Q});var i=n(6195);const o=i.z.object({id:i.z.string(),path:i.z.string(),name:i.z.string(),width:i.z.number().optional(),height:i.z.number().optional()}),r=i.z.object({unit:i.z.enum(["px","%","auto","fr"]),value:i.z.number()}),a=i.z.object({applied:i.z.boolean().default(!1),type:i.z.enum(["none","fill"]).default("none"),color:i.z.string().default("#000000"),opacity:i.z.number().default(1),style:i.z.enum(["solid","dashed","dotted"]).default("solid"),width:r.default({value:1,unit:"px"})}),s=i.z.object({assetId:i.z.string().optional(),color:i.z.string().optional(),opacity:i.z.number().min(0).max(1).default(1)}),l=s.extend({type:i.z.literal("color"),color:i.z.string().default("#e4e4e4")}),d=i.z.object({width:i.z.number(),height:i.z.number(),left:i.z.number(),top:i.z.number()}),c=s.extend({type:i.z.literal("image"),assetId:i.z.string(),crop:d.default({width:1,height:1,left:0,top:0})}),u=s.extend({type:i.z.literal("none")}),m=i.z.discriminatedUnion("type",[l,c,u]),p=i.z.discriminatedUnion("type",[l,u]),f=i.z.object({top:r.default({value:0,unit:"px"}),left:r.default({value:0,unit:"px"}),bottom:r.default({value:0,unit:"px"}),right:r.default({value:0,unit:"px"})}),g=i.z.object({type:i.z.literal("rectangle"),borderRadius:i.z.object({topLeft:i.z.number(),topRight:i.z.number(),bottomRight:i.z.number(),bottomLeft:i.z.number()}).optional()}),h=i.z.object({type:i.z.literal("ellipse")}),_=i.z.discriminatedUnion("type",[g,h]),y=i.z.object({id:i.z.string(),name:i.z.string().max(128)}),$=y.extend({x:r.default({value:0,unit:"px"}),y:r.default({value:0,unit:"px"}),xOffset:i.z.number().default(0),yOffset:i.z.number().default(0),position:i.z.literal("absolute").default("absolute"),width:r.default({value:100,unit:"%"}),height:r.default({value:100,unit:"%"}),padding:f,fill:m,overlay:p,aspectRatioLocked:i.z.boolean(),border:a,clipDef:_.default({type:"rectangle"}),rotation:i.z.number().default(0),flipX:i.z.boolean().default(!1),flipY:i.z.boolean().default(!1)}),b=t=>i.z.intersection(y,t.partial()),v=t=>i.z.intersection(i.z.object({default:t}),i.z.record(b(t))),z=t=>i.z.object({id:i.z.string(),blockumentId:i.z.string(),clonedFromId:i.z.string().optional(),parentId:i.z.string(),type:i.z.string(),name:i.z.string().max(128),tagName:i.z.enum(["div","figure","figcaption","blockquote"]).default("div"),locked:i.z.boolean().default(!1),authoringVisible:i.z.boolean().default(!0),initialVisible:i.z.boolean().default(!0),initialState:i.z.string().default("default"),states:v(t),assets:i.z.record(o).default({}).optional(),removed:i.z.boolean().default(!1),_v:i.z.literal(4)}),w=(b($),i.z.object({default:i.z.string()})),x=$.extend({audioSources:w}),k=z(x).extend({type:i.z.literal("audio")}),S=(b(x),i.z.object({id:i.z.string(),clonedFromId:i.z.string().optional(),state:i.z.string(),visible:i.z.boolean()})),A=i.z.object({id:i.z.string(),event:i.z.enum(["click","hover","mediaPlay","mediaPause","mediaEnd"]),sourceId:i.z.string().optional()}),C=A.extend({action:i.z.enum(["mediaPause","mediaPlay","mediaEnd"]),targetId:i.z.string()}),I=A.extend({action:i.z.literal("changeState"),targetId:i.z.string(),targetState:i.z.string().default("default")}),E=A.extend({action:i.z.literal("changeVisibility"),targetId:i.z.string(),targetVisibility:i.z.boolean()}),M=i.z.discriminatedUnion("action",[I,E,C]),L=i.z.object({id:i.z.string(),title:i.z.string().max(255),children:i.z.array(S).max(1),triggers:i.z.array(M),fonts:i.z.record(i.z.string()).optional(),_v:i.z.literal(4)}),P=$.extend({children:i.z.array(S)}),j=z(P).extend({type:i.z.literal("group")}),T=(b(P),i.z.intersection(i.z.object({type:i.z.string().optional(),attrs:i.z.record(i.z.any()).optional(),content:i.z.array(i.z.lazy((()=>T))).optional(),marks:i.z.array(i.z.intersection(i.z.object({type:i.z.string(),attrs:i.z.record(i.z.any()).optional()}),i.z.record(i.z.any()))).optional(),text:i.z.string().optional()}),i.z.record(i.z.any()))),H=i.z.object({id:i.z.string(),type:i.z.literal("tiptap"),json:T}),R=i.z.enum(["top","middle","bottom"]),V=$.extend({text:H,textVerticalAlign:R.default("top")}),B=z(V).extend({type:i.z.literal("text")}),F=(b(V),V.extend({altText:i.z.string().nullable().default(null)})),Y=z(F).extend({type:i.z.literal("shape")}),q=(b(F),i.z.object({default:i.z.string()})),N=$.extend({videoSources:q}),D=z(N).extend({type:i.z.literal("video")}),W=(b(N),i.z.discriminatedUnion("type",[k,j,Y,B,D])),O=i.z.object({blockuments:i.z.record(L).optional(),items:i.z.record(W).optional()}),X=(i.z.object({id:i.z.string(),blockumentId:i.z.string(),name:i.z.string().max(128)}),O);var K;!function(t){t.APP="app",t.BLOCKUMENT="blockument",t.COURSE="course"}(K||(K={}));const Q={click:"click",hover:"hover",mediaPlay:"mediaPlay",mediaPause:"mediaPause",mediaEnd:"mediaEnd"},U={changeState:"changeState",changeVisibility:"changeVisibility",mediaPause:"mediaPause",mediaPlay:"mediaPlay",mediaEnd:"mediaEnd"}}}]);